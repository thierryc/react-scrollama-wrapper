{"version":3,"file":"index.js","sources":["../src/scrollama-context.js","../src/scrollama.jsx","../src/step.jsx"],"sourcesContent":["import React from \"react\";\n\nexport const ScrollamaContext = React.createContext(() => {});","import React from \"react\"\nimport { ScrollamaContext } from \"./scrollama-context\"\nimport scrollama from \"scrollama\"\n\nclass Scrollama extends React.Component {\n  static contextType = ScrollamaContext\n\n  constructor(props) {\n    super(props)\n    this.scroller = scrollama()\n    this.steps = []\n  }\n\n  setupRef(ref) {\n    this.steps.push(ref.current)\n    return () => {\n      this.steps.splice(this.steps.indexOf(ref.current), 1)\n    }\n  }\n\n  componentDidMount() {\n    const {\n      offset = 0.5,\n      progress = false,\n      debug = false,\n      onStepEnter = () => {},\n      onStepExit = () => {},\n      onStepProgress = () => {},\n      threshold = 4,\n      once = false,\n      parent = undefined\n    } = this.props\n\n    this.scroller\n      .setup({\n        step: this.steps,\n        offset,\n        progress: progress ? true : false,\n        debug: debug ? true : false,\n        threshold, // the percentage of the viewport that must be visible\n        once,\n        parent,\n      })\n      .onStepEnter((response) => {\n        onStepEnter(response)\n      })\n      .onStepExit((response) => {\n        onStepExit(response)\n      })\n      .onStepProgress((response) => {\n        onStepProgress(response)\n      })\n\n    window.addEventListener(\"resize\", this.scroller.resize)\n  }\n  componentWillUnmount() {\n    this.scroller.destroy()\n    window.removeEventListener(\"resize\", this.scroller.resize)\n  }\n\n  render() {\n    const { children, \n      offset, \n      progress, \n      threshold, \n      onStepProgress, \n      onStepEnter, \n      onStepExit, \n      debug, \n      ...primitiveProps \n    } = this.props\n\n    return (\n      <div {...primitiveProps}>\n        <ScrollamaContext.Provider value={(ref) => this.setupRef(ref)}>\n          {children}\n        </ScrollamaContext.Provider>\n      </div>\n    )\n  }\n}\n\nexport default Scrollama\n","import React from \"react\"\nimport { ScrollamaContext } from \"./scrollama-context\"\n\nclass Step extends React.Component {\n  static contextType = ScrollamaContext\n\n  constructor(props) {\n    super(props)\n    this.stepRef = React.createRef()\n    this.remove = null\n  }\n\n  componentDidMount() {\n    this.remove = this.context(this.stepRef)\n  }\n\n  componentWillUnmount() {\n    this.remove()\n  }\n\n  render() {\n    const { children, ...primitiveProps } = this.props\n    return (\n      <div ref={this.stepRef} {...primitiveProps}>\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default Step\n"],"names":["ScrollamaContext","React","createContext","Scrollama","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","scroller","scrollama","steps","_createClass","key","value","setupRef","ref","_this2","push","current","splice","indexOf","componentDidMount","_this$props","_this$props$offset","offset","_this$props$progress","progress","_this$props$debug","debug","_this$props$onStepEnt","onStepEnter","_this$props$onStepExi","onStepExit","_this$props$onStepPro","onStepProgress","_this$props$threshold","threshold","_this$props$once","once","_this$props$parent","parent","undefined","setup","step","response","window","addEventListener","resize","componentWillUnmount","destroy","removeEventListener","render","_this3","_this$props2","children","primitiveProps","_objectWithoutProperties","_excluded","createElement","Provider","Component","_defineProperty","Step","stepRef","createRef","remove","context","_extends"],"mappings":"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"}